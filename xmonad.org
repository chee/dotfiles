#+TITLE: ~/.xmonad/xmonad.hs + ~/.xmobarrc

* XMonad
** Imports
*** Base
Import the basic things for configuration
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  import XMonad
  import XMonad.Config.Desktop
#+END_SRC

*** Extra Configuration Options
=EZConfig= is for emacs style keybindings
=Actions.Submap= is for emacs style keys, i.e. =M-x f=
=Actions.WindowGo= is for runOrRaise
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  import XMonad.Util.EZConfig (additionalKeysP, removeKeysP) -- emacs style keybinds
  import XMonad.Actions.Submap
  import XMonad.Actions.WindowGo
#+END_SRC

*** Bar
Stuff that loads the bar and prints to it
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  import XMonad.Hooks.DynamicLog
  import XMonad.Hooks.ManageDocks
  import XMonad.Util.Run (spawnPipe, hPutStrLn)
#+END_SRC

*** TODO Gaps
Useless gaps!
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  import XMonad.Layout.Gaps
#+END_SRC

** Colors
Define the variables for the color scheme.
*** Current colorscheme
base16-ocean-dark
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  base00 = "#2b303b"
  base01 = "#343d46"
  base02 = "#4f5b66"
  base03 = "#65737e"
  base04 = "#a7adba"
  base05 = "#c0c5ce"
  base06 = "#dfe1e8"
  base07 = "#eff1f5"
  base08 = "#bf616a"
  base09 = "#d08770"
  base0A = "#ebcb8b"
  base0B = "#a3be8c"
  base0C = "#96b5b4"
  base0D = "#8fa1b3"
  base0E = "#b48ead"
  base0F = "#ab7967"
#+END_SRC
   
** Borders
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  myBorderWidth = 3
  myNormalBorderColor = base02
  myFocusedBorderColor = base0D
#+END_SRC

** Terminal
Set the default terminal
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  -- TERMINAL
  myTerm = "urxvtc -e tmux"
#+END_SRC

** Keys
Define extra hotkeys in emacs style thanks to =additionalKeysP=.
"M" is the Xmonad modkey (=mod4= in my case), not =alt= as in emacs.
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  myKeys =
      [ ("M-g", runOrRaise "emacs" (className =? "Emacs")) -- g is for GNU, and because M-e switches screens
      , ("M-f", runOrRaise "firefox" (className =? "Firefox"))
      , ("M-b", sendMessage ToggleStruts)
      ]
#+END_SRC

** Workspaces
Define custom names for workspaces
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  myWorkspaces = ["1:dev", "2:www", "3", "4", "5", "6", "7", "8", "9"]
#+END_SRC

** Hooks
** Manage Hook
=g= is for GNU, also because =M-e= is used to switch between monitors
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  myManageHook = composeAll
                 [ manageHook desktopConfig
                 , manageDocks
                 , className =? "Emacs" --> doShift "1:dev"
                 , className =? "Firefox" --> doShift "2:www"
                 ]
#+END_SRC

** Layout Hook
=avoidStruts= allows me to toggle the bar on/off
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  myLayoutHook = avoidStruts $ layoutHook desktopConfig
#+END_SRC

** Event Handle Hook
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  myHandleEventHook = docksEventHook <+> handleEventHook desktopConfig
#+END_SRC

** Main
Where all the magic hapens
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmonad/xmonad.hs
  main = do
    xmproc <- spawnPipe "xmobar"
    -- TODO
    --xmproc <- spawnPipe "~/.xmonad/mybar.sh"
    xmonad $ desktopConfig
             { terminal = myTerm
             , modMask = mod4Mask
             , borderWidth = myBorderWidth
             , normalBorderColor = myNormalBorderColor
             , focusedBorderColor = myFocusedBorderColor
             , workspaces = myWorkspaces
             , manageHook = myManageHook
             , layoutHook = myLayoutHook
             , handleEventHook = myHandleEventHook
             , logHook = dynamicLogWithPP $ xmobarPP
                         { ppOutput = hPutStrLn xmproc
                         , ppCurrent = xmobarColor base0B "" . wrap "<" ">"
                         , ppTitle = xmobarColor base0C ""
                         }
             }`additionalKeysP` myKeys
#+END_SRC

* Bar
Currently using xmobar but I plan on using lemonbar eventually
** xmobar
This is mostly copied from the Arch wiki..
#+BEGIN_SRC haskell :tangle ~/dotfiles/xmonad/.xmobarrc
  Config { bgColor = "#2b303b"
         , font = "xft:Input Mono Narrow:size=10:antialias=true"

         , commands = [ Run CoreTemp       [ "--template" , "Temp: <core0>째C|<core1>째C"
                               , "--Low"      , "70"        -- units: 째C
                               , "--High"     , "80"        -- units: 째C
                               , "--low"      , "#a3be8c"
                               , "--normal"   , "#ebcb8b"
                               , "--high"     , "bf616a"
                               ] 50
                        
                       , Run Cpu ["-L","15","-H","50","--normal","#a3be8c","--high","bf616a"] 10
                            
                       , Run Date "%a %b %_d %Y %H:%M:%S" "date" 10
                         
                       , Run StdinReader
                       ]
         , sepChar = "%"
         , alignSep = "}{"
         , template = "%StdinReader% }{ %coretemp% | %cpu% | %date%"
      }
#+END_SRC
